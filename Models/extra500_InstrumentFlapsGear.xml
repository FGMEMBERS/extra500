<?xml version="1.0"?>
<!--
    This file is part of extra500

    extra500 is free software: you can redistribute it and/or modify
    it under the terms of the GNU General Public License as published by
    the Free Software Foundation, either version 2 of the License, or
    (at your option) any later version.

    extra500 is distributed in the hope that it will be useful,
    but WITHOUT ANY WARRANTY; without even the implied warranty of
    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
    GNU General Public License for more details.

    You should have received a copy of the GNU General Public License
    along with extra500.  If not, see <http://www.gnu.org/licenses/>.

      Authors: Thomas Grossberger and Dirk Dittmann
      Date: March 13 2013

      Last change:      Thomas Grossberger
      Date:             09.05.13
-->

<PropertyList>

<path>extra500_InstrumentFlapsGear.ac</path>

<!--GearLampen-->
<animation>
	<type>material</type>
	<object-name>LightGear0.Lampe</object-name>
	  <!--<condition>
    <equals>
      <property>/gear/gear[0]/position-norm</property>
      <value>1</value>
    </equals>
  </condition>-->
	<emission>	
		<red>0.0</red>	
		<green>0.5</green>	
		<blue>0.0</blue>
		<factor-prop>extra500/Light/GearNose/state</factor-prop>
	</emission>
</animation>
<animation>
	<type>material</type>
	<object-name>LightGear1.Lampe</object-name>
	  <!--<condition>
    <equals>
      <property>/gear/gear[1]/position-norm</property>
      <value>1</value>
    </equals>
  </condition>-->
	<emission>	
		<red>0.0</red>	
		<green>0.5</green>	
		<blue>0.0</blue>
		<factor-prop>extra500/Light/GearLeft/state</factor-prop>
	</emission>
</animation>
<animation>
	<type>material</type>
	<object-name>LightGear2.Lampe</object-name>
	  <!--<condition>
    <equals>
      <property>/gear/gear[2]/position-norm</property>
      <value>1</value>
    </equals>
  </condition>-->
	<emission>	
		<red>0.0</red>	
		<green>0.5</green>	
		<blue>0.0</blue>
		<factor-prop>extra500/Light/GearRight/state</factor-prop>
	</emission>
</animation>

<!--FlapsLampen-->
<animation>
	<type>material</type>
	<object-name>LightFlapTrans.Lampe</object-name>
	<!--<condition>  this is an ugly hack the trans lamp is solely dependent on the flap motor running 
      <or>
            <and>
                  <greater-than>
                        <property>/fdm/jsbsim/fcs/flap-pos-deg</property>
                        <value>0.1</value>
                  </greater-than>
                  <less-than>
                        <property>/fdm/jsbsim/fcs/flap-pos-deg</property>
                        <value>14.9</value>
                  </less-than>
            </and>
            <and>
                  <greater-than>
                        <property>/fdm/jsbsim/fcs/flap-pos-deg</property>
                        <value>15.1</value>
                  </greater-than>
                  <less-than>
                        <property>/fdm/jsbsim/fcs/flap-pos-deg</property>
                        <value>29.9</value>
                  </less-than>
            </and>
      </or>
      </condition>-->
	<emission>	
		<red>0.9</red>	
		<green>0.4</green>	
		<blue>0.1</blue>
		<factor-prop>extra500/Light/FlapTransition/state</factor-prop>
	</emission>
</animation>
<animation>
	<type>material</type>
	<object-name>LightFlap15.Lampe</object-name>
	<!--<condition>
      <and>
            <greater-than>
                  <property>/fdm/jsbsim/fcs/flap-pos-deg</property>
                  <value>14</value>
            </greater-than>
            <less-than>
                  <property>/fdm/jsbsim/fcs/flap-pos-deg</property>
                  <value>16</value>
            </less-than>
      </and>
      </condition>-->
	<emission>	
		<red>0.0</red>	
		<green>0.5</green>	
		<blue>0.0</blue>
		<factor-prop>extra500/Light/Flap15/state</factor-prop>
	</emission>
</animation>
<animation>
	<type>material</type>
	<object-name>LightFlap30.Lampe</object-name>
	<!--<condition>
      <greater-than>
            <property>/fdm/jsbsim/fcs/flap-pos-deg</property>
            <value>29</value>
      </greater-than>
      </condition>-->
	<emission>	
		<red>0.0</red>	
		<green>0.5</green>	
		<blue>0.0</blue>
		<factor-prop>extra500/Light/Flap30/state</factor-prop>
	</emission>
</animation>

<!--GearLever-->
<animation>
      <type>pick</type>
      <object-name>GearLever</object-name>
      <visible>true</visible>
      <action>
        <button>0</button>
        <repeatable>false</repeatable>
        <binding>
          <command>property-toggle</command>
          <property>controls/gear/gear-down</property>
        </binding>
      </action>
</animation>
<animation>
      <type>pick</type>
      <object-name>GearLever</object-name>
      <visible>true</visible>
      <action>
        <button>1</button>
        <repeatable>false</repeatable>
        <binding>
          <command>property-toggle</command>
          <property>controls/gear/gear-down</property>
        </binding>
      </action>
</animation>
<animation>
  <type>rotate</type>
  <object-name>GearLever</object-name>
 <property>/fdm/jsbsim/gear/gear-cmd-norm</property> 
  <interpolation>
            <entry>
                <ind>0</ind>
                <dep>-15</dep>
            </entry>
            <entry>
                <ind>1</ind>
                <dep>15</dep>
            </entry>
        </interpolation>
  <axis>
  <x1-m>-0.02287</x1-m>
  <y1-m>-0.15691</y1-m>
  <z1-m>0.005311</z1-m>
  <x2-m>-0.02287</x2-m>
  <y2-m>-0.15283</y2-m>
  <z2-m>0.005311</z2-m>
  </axis>
</animation>

<!--FlapControl-->
<animation>
      <type>pick</type>
      <object-name>FlapControl</object-name>
      <visible>true</visible>
      <action>
        <button>0</button>
        <repeatable>false</repeatable>
        <binding>
          <command>nasal</command>
          <script>controls.flapsDown(1)</script>
         </binding>
         <mod-up>
          <binding>
           <command>nasal</command>
           <script>controls.flapsDown(0)</script>
          </binding>
         </mod-up>
      </action>
      <action>
        <button>1</button>
        <repeatable>false</repeatable>
        <binding>
          <command>nasal</command>
          <script>controls.flapsDown(-1)</script>
         </binding>
         <mod-up>
          <binding>
           <command>nasal</command>
           <script>controls.flapsDown(0)</script>
          </binding>
         </mod-up>
      </action>
    </animation>
<animation>
  <type>rotate</type>
  <object-name>FlapControl</object-name>
 <property>/extra500/system/flap/Switch/state</property> 
  <interpolation>
            <entry>
                <ind>-1</ind>
                <dep>-19</dep>
            </entry>
            <entry>
                <ind>1</ind>
                <dep>19</dep>
            </entry>
        </interpolation>
  <axis>
  <x1-m>-0.0435</x1-m>
  <y1-m>1</y1-m>
  <z1-m>0.005</z1-m>
  <x2-m>-0.0435</x2-m>
  <y2-m>-1</y2-m>
  <z2-m>0.005</z2-m>
  </axis>
</animation>

<!--Dimming Test -->
<animation>
        <type>material</type>
        <object-name>GearPanel</object-name>
        <object-name>FlapPanel</object-name>

		<condition>
		<equals>
		<property>extra500/SidePanel/Light/Instrument/state</property>
		<value>1</value>
		</equals>
	</condition>
        <emission>
            <red>0.4</red>
            <green>0.4</green>
            <blue>0.4</blue>
            <factor-prop>extra500/MasterPanel/Dimming/Instrument/state</factor-prop>
        </emission>
</animation>

</PropertyList>
